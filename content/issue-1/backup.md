

好大夫在线成立16周年了，为了保障好好大夫平台的稳定性，提升研发效率，技术中心也在不断迭代，催生了一批内部平台。

// todo 这里改成列表：每个平台写几个关键职责
提供可持续构建和可持续部署的的DevOPS平台，保障接口质量的接口测试平台，提升测试效率的webUI自动化测试平台，保障全站可用性的SRE治理平台，面向运维监控告警平台，面向开发的监控告警平台，以及第三方的开源平台sentry/grafana/gitlab/jira/sonar等等。
这些平台各自承载着不同的使命和愿景，实现着自己的价值，也有着不同的发展轨迹。
// todo 加一个各平台的全景图

随着平台的不断迭代，平台之间的交互越来越频繁，一系列新的挑战也随之而来。

// todo 这里是列表，面临的痛点
平台之间相似的功能模块也越来越多，有些看似通用的模块由于历史遗留原因，不能很好的跨平台复用。再加上交叉依赖也让平台整体变的脆弱了，平台间跨部门协助也面临着额外的沟通成本。

// todo 丰富一个典型案例
比如一个典型的场景。

// todo 似乎迎来了救星
好大夫统一平台(HDF-UNION-PLATFORM),简称HUP。
// todo 这里放好大夫统一平台的全景图

接下来咱们一起聊聊HUP做的那些事儿。其中很多事都可以拿来好好聊的，咱们知道魔鬼往往隐藏在细节里，限于篇幅这里先先简单说说，大家如果感兴趣欢迎随时交流。

第一个要解决的痛点--紊乱的账号体系

很多开源的项目其实已经内置支持了[LDAP](../todo)，为了减少研发成本，
研发日常工作会涉及到诸多平台的切换，

组织架构不规范。
单点登录

统一账号权限体系

可配置的菜单，导航

全局搜索

go接口api设计理论

go培训

低代码功能的引入

云端开发

调用环模式

稳定性如何保障

工作流的接入，工作流的整体拓扑图

发布工程

argocd 以及 gitlabci

集成sonar

面临了哪些问题？
- 老系统如何平滑的迁移过来
- 改造的难点有哪些
  - 部署在虚拟机
  - 数据库在线下
  - 依赖宿主机的一些操作

  - 共享数据库
  
## 我们要的是跑车
不是从自行车升级到，电动车，而是极致体验的跑车。


## 基建，跑车产品化的先决条件

## 契约规范，

## 精益求精，深度打磨最常用的模块

## 文化自信，跑车可持续交付的命脉




把我们经历的几个阶段  写出来，一步步的 发展到今天的地步


先是工具集，然后是PaaS平台。

最后到大一统。


[番外1]
SSO单点登录

[番外2]
云端开发

[番外3]
发布体系

其实业内也在探索这一块，大部分是依托聊天软件展开的，有企业微信，钉钉，飞书等。



## 莽荒纪，生生不息

## 群雄割据，PaaS林立

## 顺应民意，合而为一
<!-- ## 离谱，居然差一个网址导航？ -->
[将这些痛点做出一个图]
以下场景相信大家都不陌生。
- 测试用例每次需要准备基境数据，那咱们就整个mock数据的小工具吧。
- 支付渠道越来越多，配置完小半天就没了，那咱们整个一键配置支付环境的小工具吧。
- 再有个小工具，能自由控制合作方域名回调测试，也是极好的。
- 如果咱们新sql从开发环境到产线环境，每一步都被验证过，将能提升稳定性，嗯，那就整个SQL PaaS平台吧。
- 对了对了，咱们经常处理消息的分发，再整个消息中间件的PaaS就完满了。
- 还不够，帮我们把项目从初始化，到最终交付产线整个流水线吧，最好能无人值守。
- ...

研发、测试、运维针对自己的日常工作，都在往自动化，智能化方向迭代。大家也享受着各种小工具带来的便利，同时又忍受着小工具带来的痛。
- 小工具的同质化，咱们知道组织架构，存在康威定律，为了减少沟通成本，往往演化出自己的一套工具链。重复的基建，也内耗了不少研发成本。
- 新员工的培训成本的增加，随着工具集的丰富，日常任务需要频繁地切换上下文，造成人力损耗。
- 随着工具集的丰富，往往在关键时刻找不到入口，更有甚者，低频的修复工具，在应急的时候，因年久失修而掉链子。

于是乎百宝箱的概念被提出来，咱们能不能把这些工具都归拢到一块，再按角色做好分类，再整合同质化的工具，这样打包放一块不就方便使用了吗?
继续之前的康威定律，前端弄了个构建平台，运维弄个了devops,测试弄了个自动化测试平台，基础架构弄了个治理平台。

到这里，提效只差一个网址导航了，再来一个首页，把各个平台的菜单展开，统一纳入进来就完美了。
[将以下内容放到一个网址导航的图片中]

网址导航，是把选择权交给了用户，罗列一堆工具链的入口。
- 有流量抓取分析的URL集合；
- 有sonar代码扫描的入口；
- 有sentry异常诊断的入口；
- 有添加短信模板的入口；
- 有提sql上线的入口等等等等。
事实上这对研发的心智要求非常高。然而在精细化分开的当下，要想了解方方面面，几乎很难做到。随着功能的堆砌，导航网址越来越多。
有时候为了解决一个问题，需要从多个入口之间不停地跳来跳去，最后我们得到了一个集多功能于一身的缝合怪。

这与我们的初衷违背，我们要的不是瑞士军刀，只要一把能生存利器而已。


在一定规模的时候，丰富的技术栈保障了创新性，在团队规模较小的时候，统一技术栈的收益还是相当高点。再加上我们很多基础组件已经采用Golang体系沉淀两年了，为了更好地接入云原生，，我们还是切换到了Golang体系。
